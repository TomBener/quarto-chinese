# 中文引号的处理

中文排版之难，引号为首。
引号的处理，是中文排版非常tricky 的问题，
「万恶之源」在于是简体中文和英文的引号相同，
但却要求呈现出不同的效果。
具体来说，简体中文使用的引号 `“`、`”`、`‘`、`’` 和
英语使用的蝌蚪引号是完全一样的，
但由于中文字符较宽，所以在排版时需要让包裹中文的引号看上去更宽一些，
而包裹英文的引号看上去更窄一些，特别是在 Word 中。

正是由于这个原因，不少网友会使用繁体中文的
直角引号 `「`、`」`、`『`、`』` 来替代简体中文的引号，
然而中华人民共和国的国家标准规定了使用简体中文的引号，
在正式的学术论文中，不推荐使用这种写法。

为了解决这个问题，本项目提供了一套完整的引号处理方案，
具体来说，在 Markdown 中使用直角引号 `「`、`」`、`『`、`』`，
借助以下这几个 Lua filters，可以实现引号的自动转换：

- `_extensions/docx-quotes/`：处理 Word 正文中的引号，使包裹中文的引号看上去更宽。
- `_extensions/latex-body-quotes/`：处理 LaTeX 正文中的引号，将中文直角引号转换为德语引号（其他东欧语系也有类似的引号），再交给 [newunicodechar][1] 宏包恢复为蝌蚪引号。
- `_extensions/latex-header-quotes/`：专门处理 LaTeX 标题，既保证 PDF 里显示正确，也让 PDF 书签保持 Unicode 文本。
- `_extensions/typst-quotes/`：在 Typst 输出中转换中文直角引号，避免 PDF 中的中西文混排问题。
- `_extensions/cnbib-quotes.lua`：处理 HTML、EPUB、LaTeX 和 Typst 参考文献中的引号，确保中文条目使用期望的直角引号，而英文条目保持蝌蚪引号。

[1]: https://ctan.org/pkg/newunicodechar

这样，无论是在 Word、LaTeX 还是 Typst 中，都可以得到符合规范的引号效果；
而对于 HTML/EPUB 的参考文献，则会做「反向处理」，将包裹中文的蝌蚪引号转换回直角引号。
